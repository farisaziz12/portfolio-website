---
import BaseLayout from '../layouts/BaseLayout.astro';
import { client, urlFor } from '../lib/sanity/client';
import { allSocialPostsQuery, allTestimonialsQuery } from '../lib/sanity/queries';

// Fetch all data
const [socialPosts, testimonials] = await Promise.all([
  client.fetch(allSocialPostsQuery),
  client.fetch(allTestimonialsQuery),
]);

// Get unique platforms
const platforms = [...new Set(socialPosts.map((p: any) => p.platform))];

// Get unique testimonial types
const testimonialTypes = [...new Set(testimonials.map((t: any) => t.type || 'other'))];

const stats = {
  total: socialPosts.length + testimonials.length,
  posts: socialPosts.length,
  testimonials: testimonials.length,
  twitter: socialPosts.filter((p: any) => p.platform === 'twitter').length,
  linkedin: socialPosts.filter((p: any) => p.platform === 'linkedin').length,
  platforms: platforms.length,
  // Testimonial type counts
  linkedinRecs: testimonials.filter((t: any) => t.type === 'linkedin').length,
  mentorcruiseRecs: testimonials.filter((t: any) => t.type === 'mentorcruise').length,
  workshopRecs: testimonials.filter((t: any) => t.type === 'workshop').length,
  talkRecs: testimonials.filter((t: any) => t.type === 'talk').length,
  otherRecs: testimonials.filter((t: any) => !t.type || t.type === 'other').length,
};

// Helper functions for testimonial labels
const contextLabels: Record<string, string> = {
  worked_together: 'Worked together',
  managed: 'Managed directly',
  reported: 'Reported to Faris',
  mentored: 'Mentored by Faris',
  workshop_attendee: 'Workshop attendee',
  conference_attendee: 'Conference attendee',
  speaking: 'Speaking engagement',
  consulting: 'Consulting client',
  collaboration: 'Collaboration',
};

const typeLabels: Record<string, string> = {
  linkedin: 'LinkedIn',
  workshop: 'Workshop',
  talk: 'Conference',
  mentorcruise: 'MentorCruise',
  other: 'Review',
};

function getContextLabel(context: string): string {
  return contextLabels[context] || context;
}

function getTypeLabel(type: string): string {
  return typeLabels[type] || 'Review';
}
---

<BaseLayout
  title="Wall of Appreciation | Faris Aziz"
  description="Kind words, mentions, and testimonials from the community about my talks, work, and contributions."
  pathname="/appreciation"
>
  <!-- Hero Section -->
  <section class="relative min-h-[60vh] flex items-center overflow-hidden">
    <div class="absolute inset-0 grid-pattern opacity-50"></div>
    <div class="absolute inset-0 gradient-mesh"></div>

    <div class="container relative z-10 py-20 md:py-28">
      <div class="max-w-4xl">
        <!-- Terminal intro -->
        <div class="terminal max-w-md mb-8 animate-fade-in">
          <div class="terminal__header">
            <div class="terminal__dots">
              <div class="terminal__dot terminal__dot--red"></div>
              <div class="terminal__dot terminal__dot--yellow"></div>
              <div class="terminal__dot terminal__dot--green"></div>
            </div>
            <span class="terminal__title">appreciation.sh</span>
          </div>
          <div class="terminal__body">
            <span class="terminal__prompt">$</span>
            <span class="terminal__command"> cat community_feedback.md</span>
            <div class="terminal__output">Loading {stats.total} kind words...</div>
          </div>
        </div>

        <h1 class="hero-title mb-6">
          <span class="block text-ink">Wall of</span>
          <span class="block hero-title--gradient">Appreciation</span>
        </h1>

        <p class="text-lead max-w-2xl mb-10">
          Real feedback from conferences, colleagues, and the tech community.
          Every mention motivates me to keep sharing knowledge.
        </p>

        <!-- Quick Stats -->
        <div class="flex flex-wrap gap-8 mb-10">
          <div class="stat-item">
            <span class="stat-item__value text-accent">{stats.posts}</span>
            <span class="stat-item__label">Social Posts</span>
          </div>
          <div class="stat-item">
            <span class="stat-item__value text-violet-500">{stats.testimonials}</span>
            <span class="stat-item__label">Testimonials</span>
          </div>
          <div class="stat-item">
            <span class="stat-item__value text-pink-500">{stats.platforms}</span>
            <span class="stat-item__label">Platforms</span>
          </div>
        </div>

        <!-- Jump Link -->
        <a href="#content" class="btn-primary">
          Explore Feedback
          <svg class="w-4 h-4 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Tabbed Feedback Section -->
  <section id="content" class="section py-16 md:py-24">
    <div class="container">
      <!-- Section Header -->
      <div class="text-center mb-10">
        <p class="text-accent font-mono text-sm tracking-wider uppercase mb-3">Community Feedback</p>
        <h2 class="text-3xl md:text-4xl font-display font-bold text-ink">
          What People <span class="text-gradient">Say</span>
        </h2>
      </div>

      <!-- Main Category Tabs -->
      <div class="category-tabs" role="tablist">
        <button class="category-tab active" data-tab="social" role="tab" aria-selected="true" aria-controls="social-panel">
          <div class="category-tab__icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="category-tab__content">
            <span class="category-tab__title">Social Mentions</span>
            <span class="category-tab__desc">Posts from X & LinkedIn</span>
          </div>
          <span class="category-tab__badge">{stats.posts}</span>
        </button>

        <button class="category-tab" data-tab="testimonials" role="tab" aria-selected="false" aria-controls="testimonials-panel">
          <div class="category-tab__icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="category-tab__content">
            <span class="category-tab__title">Testimonials</span>
            <span class="category-tab__desc">Reviews & recommendations</span>
          </div>
          <span class="category-tab__badge">{stats.testimonials}</span>
        </button>
      </div>

      <!-- Social Mentions Panel -->
      <div id="social-panel" class="tab-panel active" role="tabpanel">
        <!-- Platform Filter -->
        <div class="platform-filter">
          <span class="platform-filter__label">Filter by platform:</span>
          <div class="platform-filter__options">
            <button class="platform-btn active" data-filter="all">
              All
            </button>
            <button class="platform-btn platform-btn--x" data-filter="twitter">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
              </svg>
              X
            </button>
            <button class="platform-btn platform-btn--linkedin" data-filter="linkedin">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
              LinkedIn
            </button>
          </div>
        </div>

        <!-- Posts Grid -->
        <div class="posts-grid">
          {socialPosts.map((post: any, index: number) => (
            <div class="post-wrapper" data-type={post.platform} style={`--index: ${index}`}>
              <a
                href={post.url}
                target="_blank"
                rel="noopener noreferrer"
                class={`post-card post-card--${post.platform}`}
              >
                <div class="post-card__header">
                  {post.authorImage ? (
                    <img
                      src={urlFor(post.authorImage).width(48).height(48).url()}
                      alt={post.author}
                      class="post-card__avatar"
                    />
                  ) : (
                    <div class={`post-card__avatar post-card__avatar--placeholder post-card__avatar--${post.platform}`}>
                      {post.author?.charAt(0)}
                    </div>
                  )}
                  <div class="post-card__author">
                    <span class="post-card__name">{post.author}</span>
                    {post.authorRole && (
                      <span class="post-card__role">{post.authorRole}</span>
                    )}
                    {post.postDate && (
                      <span class="post-card__date">
                        {new Date(post.postDate).toLocaleDateString('en-US', {
                          month: 'short',
                          day: 'numeric',
                          year: 'numeric'
                        })}
                      </span>
                    )}
                  </div>
                  <div class={`post-card__platform post-card__platform--${post.platform}`}>
                    {post.platform === 'twitter' ? (
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                      </svg>
                    ) : (
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                      </svg>
                    )}
                  </div>
                </div>

                <p class="post-card__content">{post.content}</p>

                <div class="post-card__footer">
                  {post.content.length > 200 && (
                    <button class="post-card__expand" data-expand-btn>
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 9l-7 7-7-7" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                      <span class="expand-text">Show more</span>
                    </button>
                  )}
                  <span class="post-card__cta">
                    Read on {post.platform === 'twitter' ? 'X' : 'LinkedIn'}
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M7 17L17 7M17 7H7M17 7V17" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </span>
                </div>
              </a>
            </div>
          ))}
        </div>

        <!-- Empty State -->
        <div class="empty-state" style="display: none;">
          <div class="text-6xl mb-4">üîç</div>
          <p class="text-ink-muted">No posts match the current filter.</p>
        </div>
      </div>

      <!-- Testimonials Panel -->
      <div id="testimonials-panel" class="tab-panel" role="tabpanel">
        <!-- Testimonial Type Filter -->
        <div class="testimonial-filter">
          <span class="testimonial-filter__label">Filter by type:</span>
          <div class="testimonial-filter__options">
            <button class="testimonial-btn active" data-testimonial-filter="all">
              All
              <span class="testimonial-btn__count">{stats.testimonials}</span>
            </button>
            {stats.linkedinRecs > 0 && (
              <button class="testimonial-btn testimonial-btn--linkedin" data-testimonial-filter="linkedin">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                </svg>
                LinkedIn
                <span class="testimonial-btn__count">{stats.linkedinRecs}</span>
              </button>
            )}
            {stats.mentorcruiseRecs > 0 && (
              <button class="testimonial-btn testimonial-btn--mentorcruise" data-testimonial-filter="mentorcruise">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                MentorCruise
                <span class="testimonial-btn__count">{stats.mentorcruiseRecs}</span>
              </button>
            )}
            {stats.workshopRecs > 0 && (
              <button class="testimonial-btn testimonial-btn--workshop" data-testimonial-filter="workshop">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Workshop
                <span class="testimonial-btn__count">{stats.workshopRecs}</span>
              </button>
            )}
            {stats.talkRecs > 0 && (
              <button class="testimonial-btn testimonial-btn--talk" data-testimonial-filter="talk">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Conference
                <span class="testimonial-btn__count">{stats.talkRecs}</span>
              </button>
            )}
          </div>
        </div>

        <div class="recommendations-grid">
          {testimonials.map((testimonial: any, index: number) => (
            <>
              {/* LinkedIn Recommendation - Authentic LinkedIn UI */}
              {testimonial.type === 'linkedin' ? (
                <div class="linkedin-rec testimonial-wrapper" data-testimonial-type="linkedin" style={`--index: ${index}`}>
                  {/* LinkedIn Header */}
                  <div class="linkedin-rec__header">
                    {testimonial.image ? (
                      <img
                        src={urlFor(testimonial.image).width(72).height(72).url()}
                        alt={testimonial.author}
                        class="linkedin-rec__avatar"
                      />
                    ) : (
                      <div class="linkedin-rec__avatar linkedin-rec__avatar--placeholder">
                        {testimonial.author?.charAt(0)}
                      </div>
                    )}
                    <div class="linkedin-rec__author-info">
                      <span class="linkedin-rec__name">{testimonial.author}</span>
                      {testimonial.role && (
                        <span class="linkedin-rec__headline">{testimonial.role}{testimonial.company && ` at ${testimonial.company}`}</span>
                      )}
                      {testimonial.date && (
                        <span class="linkedin-rec__date">
                          {new Date(testimonial.date).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}
                        </span>
                      )}
                    </div>
                    <svg class="linkedin-rec__logo" viewBox="0 0 24 24" fill="#0a66c2">
                      <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                  </div>

                  {/* Relationship Context */}
                  {testimonial.context && (
                    <div class="linkedin-rec__relationship">
                      <svg class="linkedin-rec__relationship-icon" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 8a3 3 0 100-6 3 3 0 000 6zM2 14s-1 0-1-1 1-4 7-4 7 3 7 4-1 1-1 1H2z"/>
                      </svg>
                      <span>{testimonial.author} {getContextLabel(testimonial.context).toLowerCase()} with Faris</span>
                    </div>
                  )}

                  {/* Quote */}
                  <blockquote class="linkedin-rec__quote">
                    <p>"{testimonial.quote}"</p>
                  </blockquote>

                  {/* Footer */}
                  {testimonial.source && (
                    <a href={testimonial.source} target="_blank" rel="noopener noreferrer" class="linkedin-rec__link">
                      <span>See recommendation on LinkedIn</span>
                      <svg viewBox="0 0 16 16" fill="currentColor">
                        <path fill-rule="evenodd" d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z"/>
                        <path fill-rule="evenodd" d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z"/>
                      </svg>
                    </a>
                  )}
                </div>
              ) : (
                /* Other Testimonial Types */
                <div class={`testimonial-card testimonial-card--${testimonial.type || 'other'} testimonial-wrapper`} data-testimonial-type={testimonial.type || 'other'} style={`--index: ${index}`}>
                  {/* Platform Badge */}
                  <div class={`testimonial-card__badge testimonial-card__badge--${testimonial.type || 'other'}`}>
                    {testimonial.type === 'mentorcruise' && (
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                      </svg>
                    )}
                    {testimonial.type === 'workshop' && (
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    )}
                    {testimonial.type === 'talk' && (
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    )}
                    <span>{getTypeLabel(testimonial.type)}</span>
                  </div>

                  {/* Rating for MentorCruise */}
                  {testimonial.type === 'mentorcruise' && testimonial.rating && (
                    <div class="testimonial-card__rating">
                      {[1, 2, 3, 4, 5].map((star) => (
                        <svg class={`testimonial-card__star ${star <= testimonial.rating ? 'testimonial-card__star--filled' : ''}`} viewBox="0 0 20 20" fill="currentColor">
                          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                        </svg>
                      ))}
                    </div>
                  )}

                  {/* Quote */}
                  <blockquote class="testimonial-card__quote">
                    <p>{testimonial.quote}</p>
                  </blockquote>

                  {/* Author */}
                  <div class="testimonial-card__author">
                    {testimonial.image ? (
                      <img
                        src={urlFor(testimonial.image).width(56).height(56).url()}
                        alt={testimonial.author}
                        class="testimonial-card__avatar"
                      />
                    ) : (
                      <div class={`testimonial-card__avatar testimonial-card__avatar--placeholder testimonial-card__avatar--${testimonial.type || 'other'}`}>
                        {testimonial.author?.charAt(0)}
                      </div>
                    )}
                    <div class="testimonial-card__author-info">
                      <span class="testimonial-card__name">{testimonial.author}</span>
                      {(testimonial.role || testimonial.company) && (
                        <span class="testimonial-card__role">
                          {testimonial.role}{testimonial.company && ` ¬∑ ${testimonial.company}`}
                        </span>
                      )}
                      {testimonial.context && (
                        <span class="testimonial-card__context">
                          {getContextLabel(testimonial.context)}
                        </span>
                      )}
                    </div>
                  </div>

                  {/* Source Link */}
                  {testimonial.source && (
                    <a href={testimonial.source} target="_blank" rel="noopener noreferrer" class="testimonial-card__link">
                      View original
                      <svg viewBox="0 0 20 20" fill="currentColor">
                        <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/>
                        <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/>
                      </svg>
                    </a>
                  )}
                </div>
              )}
            </>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-accent via-violet-600 to-pink-600"></div>
    <div class="absolute inset-0 grid-pattern opacity-10"></div>

    <div class="container relative z-10 py-20 md:py-28">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl md:text-4xl font-display font-bold text-white mb-4">
          Want to share your experience?
        </h2>
        <p class="text-white/80 text-lg mb-8">
          If you've attended one of my talks or worked with me, I'd love to hear your feedback.
        </p>
        <div class="flex flex-wrap gap-4 justify-center">
          <a
            href="https://twitter.com/FarisAziz12"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2 px-6 py-3 bg-white text-gray-900 font-semibold rounded-xl hover:bg-white/90 transition-all"
          >
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
              <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
            </svg>
            Tag me on X
          </a>
          <a
            href="https://linkedin.com/in/farisaziz12"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2 px-6 py-3 bg-white/10 text-white font-semibold rounded-xl border border-white/30 hover:bg-white/20 transition-all"
          >
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
              <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
            Connect on LinkedIn
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* Stats */
  .stat-item {
    display: flex;
    flex-direction: column;
  }

  .stat-item__value {
    font-size: 2.5rem;
    font-weight: 700;
    font-family: var(--font-display);
    line-height: 1;
  }

  .stat-item__label {
    font-size: 0.75rem;
    color: var(--ink-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-top: 0.25rem;
  }

  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Category Tabs - Main Navigation */
  .category-tabs {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    max-width: 700px;
    margin: 0 auto 2.5rem;
  }

  .category-tab {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.25rem 1.5rem;
    background: var(--surface-raised);
    border: 2px solid var(--edge);
    border-radius: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: left;
  }

  .category-tab:hover {
    border-color: var(--ink-faint);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  }

  .category-tab.active {
    border-color: var(--accent);
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.08), rgba(139, 92, 246, 0.08));
    box-shadow: 0 4px 16px rgba(99, 102, 241, 0.15);
  }

  .category-tab__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 3rem;
    height: 3rem;
    background: var(--surface-overlay);
    border-radius: 0.75rem;
    flex-shrink: 0;
    transition: all 0.2s;
  }

  .category-tab__icon svg {
    width: 1.5rem;
    height: 1.5rem;
    color: var(--ink-muted);
    transition: color 0.2s;
  }

  .category-tab.active .category-tab__icon {
    background: var(--accent);
  }

  .category-tab.active .category-tab__icon svg {
    color: white;
  }

  .category-tab__content {
    flex: 1;
    min-width: 0;
  }

  .category-tab__title {
    display: block;
    font-size: 1rem;
    font-weight: 600;
    color: var(--ink);
    margin-bottom: 0.125rem;
  }

  .category-tab__desc {
    display: block;
    font-size: 0.8125rem;
    color: var(--ink-muted);
  }

  .category-tab__badge {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 2rem;
    height: 2rem;
    padding: 0 0.625rem;
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--ink-muted);
    background: var(--surface-overlay);
    border-radius: 9999px;
    transition: all 0.2s;
  }

  .category-tab.active .category-tab__badge {
    color: white;
    background: var(--accent);
  }

  @media (max-width: 640px) {
    .category-tabs {
      grid-template-columns: 1fr;
      gap: 0.75rem;
    }

    .category-tab {
      padding: 1rem 1.25rem;
    }

    .category-tab__icon {
      width: 2.5rem;
      height: 2.5rem;
    }

    .category-tab__icon svg {
      width: 1.25rem;
      height: 1.25rem;
    }
  }

  /* Platform Filter */
  .platform-filter {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 2rem;
    padding: 1rem;
    background: var(--surface-overlay);
    border-radius: 0.75rem;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
  }

  .platform-filter__label {
    font-size: 0.8125rem;
    color: var(--ink-muted);
    white-space: nowrap;
  }

  .platform-filter__options {
    display: flex;
    gap: 0.5rem;
  }

  .platform-btn {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.5rem 1rem;
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--ink-muted);
    background: var(--surface-raised);
    border: 1px solid var(--edge);
    border-radius: 9999px;
    cursor: pointer;
    transition: all 0.15s ease;
  }

  .platform-btn:hover {
    border-color: var(--ink-faint);
    color: var(--ink);
  }

  .platform-btn.active {
    color: white;
    background: var(--ink);
    border-color: var(--ink);
  }

  .platform-btn--x.active {
    background: #000;
    border-color: #000;
  }

  .platform-btn--linkedin.active {
    background: #0a66c2;
    border-color: #0a66c2;
  }

  .platform-btn svg {
    width: 0.875rem;
    height: 0.875rem;
  }

  @media (max-width: 500px) {
    .platform-filter {
      flex-direction: column;
      gap: 0.75rem;
    }

    .platform-filter__label {
      font-size: 0.75rem;
    }
  }

  /* Testimonial Filter */
  .testimonial-filter {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 2rem;
    padding: 1rem;
    background: var(--surface-overlay);
    border-radius: 0.75rem;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
  }

  .testimonial-filter__label {
    font-size: 0.8125rem;
    color: var(--ink-muted);
    white-space: nowrap;
  }

  .testimonial-filter__options {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    justify-content: center;
  }

  .testimonial-btn {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.5rem 0.875rem;
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--ink-muted);
    background: var(--surface-raised);
    border: 1px solid var(--edge);
    border-radius: 9999px;
    cursor: pointer;
    transition: all 0.15s ease;
  }

  .testimonial-btn:hover {
    border-color: var(--ink-faint);
    color: var(--ink);
  }

  .testimonial-btn.active {
    color: white;
    background: var(--ink);
    border-color: var(--ink);
  }

  .testimonial-btn--linkedin.active {
    background: #0a66c2;
    border-color: #0a66c2;
  }

  .testimonial-btn--mentorcruise.active {
    background: linear-gradient(135deg, #6366f1, #8b5cf6);
    border-color: #6366f1;
  }

  .testimonial-btn--workshop.active {
    background: #10b981;
    border-color: #10b981;
  }

  .testimonial-btn--talk.active {
    background: #ec4899;
    border-color: #ec4899;
  }

  .testimonial-btn svg {
    width: 0.875rem;
    height: 0.875rem;
  }

  .testimonial-btn__count {
    font-size: 0.6875rem;
    padding: 0.125rem 0.375rem;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 9999px;
    margin-left: 0.125rem;
  }

  .testimonial-btn.active .testimonial-btn__count {
    background: rgba(255, 255, 255, 0.2);
  }

  .testimonial-wrapper.hidden {
    display: none;
  }

  .testimonials-empty-state {
    text-align: center;
    padding: 4rem 2rem;
  }

  @media (max-width: 600px) {
    .testimonial-filter {
      flex-direction: column;
      gap: 0.75rem;
    }

    .testimonial-filter__label {
      font-size: 0.75rem;
    }

    .testimonial-btn {
      padding: 0.375rem 0.625rem;
      font-size: 0.75rem;
    }
  }

  /* Tab Panels */
  .tab-panel {
    display: none;
  }

  .tab-panel.active {
    display: block;
    animation: fadeUp 0.3s ease-out;
  }

  /* Testimonials Grid */
  .recommendations-grid {
    display: grid;
    gap: 1.5rem;
    max-width: 900px;
    margin: 0 auto;
  }

  /* LinkedIn Recommendation - Authentic LinkedIn Style */
  .linkedin-rec {
    background: #ffffff;
    border: 1px solid #e0dfdc;
    border-radius: 8px;
    padding: 1rem 1rem 0.75rem;
    animation: fadeUp 0.5s ease-out both;
    animation-delay: calc(var(--index) * 0.05s);
    transition: box-shadow 0.2s;
    font-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
  }

  .linkedin-rec:hover {
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.08), 0 4px 12px rgba(0, 0, 0, 0.12);
  }

  /* LinkedIn Header */
  .linkedin-rec__header {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
  }

  .linkedin-rec__avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
  }

  .linkedin-rec__avatar--placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    background: #0a66c2;
    color: white;
    font-weight: 600;
    font-size: 1.125rem;
  }

  .linkedin-rec__author-info {
    flex: 1;
    min-width: 0;
  }

  .linkedin-rec__name {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    color: rgba(0, 0, 0, 0.9);
    line-height: 1.33;
  }

  .linkedin-rec__name:hover {
    color: #0a66c2;
    text-decoration: underline;
    cursor: pointer;
  }

  .linkedin-rec__headline {
    display: block;
    font-size: 0.75rem;
    color: rgba(0, 0, 0, 0.6);
    line-height: 1.33;
    margin-top: 2px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .linkedin-rec__date {
    display: block;
    font-size: 0.75rem;
    color: rgba(0, 0, 0, 0.6);
    line-height: 1.33;
    margin-top: 2px;
  }

  .linkedin-rec__logo {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
  }

  /* LinkedIn Relationship Context */
  .linkedin-rec__relationship {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.5rem 0.75rem;
    margin-bottom: 0.75rem;
    background: #f3f2ef;
    border-radius: 8px;
    font-size: 0.75rem;
    color: rgba(0, 0, 0, 0.6);
  }

  .linkedin-rec__relationship-icon {
    width: 14px;
    height: 14px;
    color: rgba(0, 0, 0, 0.6);
    flex-shrink: 0;
  }

  /* LinkedIn Quote */
  .linkedin-rec__quote {
    margin: 0 0 0.75rem 0;
  }

  .linkedin-rec__quote p {
    font-size: 0.875rem;
    line-height: 1.43;
    color: rgba(0, 0, 0, 0.9);
    white-space: pre-line;
    margin: 0;
  }

  /* LinkedIn Link */
  .linkedin-rec__link {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.5rem 0;
    font-size: 0.75rem;
    font-weight: 600;
    color: #0a66c2;
    text-decoration: none;
    transition: all 0.15s;
  }

  .linkedin-rec__link:hover {
    text-decoration: underline;
  }

  .linkedin-rec__link svg {
    width: 12px;
    height: 12px;
  }

  /* Dark mode adjustments for LinkedIn card */
  @media (prefers-color-scheme: dark) {
    .linkedin-rec {
      background: #1b1f23;
      border-color: #38434f;
    }

    .linkedin-rec__name {
      color: rgba(255, 255, 255, 0.9);
    }

    .linkedin-rec__name:hover {
      color: #70b5f9;
    }

    .linkedin-rec__headline,
    .linkedin-rec__date {
      color: rgba(255, 255, 255, 0.6);
    }

    .linkedin-rec__relationship {
      background: #38434f;
      color: rgba(255, 255, 255, 0.6);
    }

    .linkedin-rec__relationship-icon {
      color: rgba(255, 255, 255, 0.6);
    }

    .linkedin-rec__quote p {
      color: rgba(255, 255, 255, 0.9);
    }

    .linkedin-rec__link {
      color: #70b5f9;
    }
  }

  /* Testimonial Card - Base */
  .testimonial-card {
    position: relative;
    background: var(--surface-raised);
    border: 2px solid var(--edge);
    border-radius: 1rem;
    padding: 1.5rem;
    animation: fadeUp 0.5s ease-out both;
    animation-delay: calc(var(--index) * 0.05s);
    transition: all 0.2s;
  }

  .testimonial-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
  }

  /* Platform-specific colors */
  .testimonial-card--linkedin {
    border-color: rgba(10, 102, 194, 0.2);
  }
  .testimonial-card--linkedin:hover {
    border-color: rgba(10, 102, 194, 0.4);
    box-shadow: 0 8px 24px rgba(10, 102, 194, 0.15);
  }

  .testimonial-card--mentorcruise {
    border-color: rgba(99, 102, 241, 0.2);
  }
  .testimonial-card--mentorcruise:hover {
    border-color: rgba(99, 102, 241, 0.4);
    box-shadow: 0 8px 24px rgba(99, 102, 241, 0.15);
  }

  .testimonial-card--workshop {
    border-color: rgba(16, 185, 129, 0.2);
  }
  .testimonial-card--workshop:hover {
    border-color: rgba(16, 185, 129, 0.4);
    box-shadow: 0 8px 24px rgba(16, 185, 129, 0.15);
  }

  .testimonial-card--talk {
    border-color: rgba(236, 72, 153, 0.2);
  }
  .testimonial-card--talk:hover {
    border-color: rgba(236, 72, 153, 0.4);
    box-shadow: 0 8px 24px rgba(236, 72, 153, 0.15);
  }

  /* Platform Badge */
  .testimonial-card__badge {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.375rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 600;
    border-radius: 9999px;
    margin-bottom: 1rem;
  }

  .testimonial-card__badge svg {
    width: 0.875rem;
    height: 0.875rem;
  }

  .testimonial-card__badge--linkedin {
    background: #0a66c2;
    color: white;
  }

  .testimonial-card__badge--mentorcruise {
    background: linear-gradient(135deg, #6366f1, #8b5cf6);
    color: white;
  }

  .testimonial-card__badge--workshop {
    background: #10b981;
    color: white;
  }

  .testimonial-card__badge--talk {
    background: #ec4899;
    color: white;
  }

  .testimonial-card__badge--other {
    background: var(--surface-overlay);
    color: var(--ink-muted);
    border: 1px solid var(--edge);
  }

  /* Rating Stars */
  .testimonial-card__rating {
    display: flex;
    gap: 0.125rem;
    margin-bottom: 0.75rem;
  }

  .testimonial-card__star {
    width: 1.125rem;
    height: 1.125rem;
    color: var(--edge);
  }

  .testimonial-card__star--filled {
    color: #fbbf24;
  }

  /* Quote */
  .testimonial-card__quote {
    margin: 0 0 1.25rem 0;
  }

  .testimonial-card__quote p {
    font-size: 0.9375rem;
    line-height: 1.7;
    color: var(--ink);
    white-space: pre-line;
    margin: 0;
  }

  /* Author */
  .testimonial-card__author {
    display: flex;
    align-items: center;
    gap: 0.875rem;
    padding-top: 1rem;
    border-top: 1px solid var(--edge);
  }

  .testimonial-card__avatar {
    width: 2.75rem;
    height: 2.75rem;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
  }

  .testimonial-card__avatar--placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1rem;
    color: white;
  }

  .testimonial-card__avatar--linkedin { background: #0a66c2; }
  .testimonial-card__avatar--mentorcruise { background: linear-gradient(135deg, #6366f1, #8b5cf6); }
  .testimonial-card__avatar--workshop { background: #10b981; }
  .testimonial-card__avatar--talk { background: #ec4899; }
  .testimonial-card__avatar--other { background: var(--ink-muted); }

  .testimonial-card__author-info {
    flex: 1;
    min-width: 0;
  }

  .testimonial-card__name {
    display: block;
    font-weight: 600;
    font-size: 0.9375rem;
    color: var(--ink);
  }

  .testimonial-card__role {
    display: block;
    font-size: 0.8125rem;
    color: var(--ink-muted);
  }

  .testimonial-card__context {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    margin-top: 0.25rem;
    padding: 0.125rem 0.5rem;
    font-size: 0.6875rem;
    font-weight: 500;
    color: var(--ink-faint);
    background: var(--surface-overlay);
    border-radius: 9999px;
  }

  /* Source Link */
  .testimonial-card__link {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    margin-top: 1rem;
    padding: 0.5rem 0.875rem;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--ink-muted);
    background: var(--surface-overlay);
    border: 1px solid var(--edge);
    border-radius: 0.5rem;
    text-decoration: none;
    transition: all 0.15s;
  }

  .testimonial-card__link:hover {
    color: var(--accent);
    border-color: var(--accent);
  }

  .testimonial-card__link svg {
    width: 0.875rem;
    height: 0.875rem;
  }

  /* Posts Grid */
  .posts-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    align-items: start;
  }

  @media (max-width: 1024px) {
    .posts-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 640px) {
    .posts-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Post Wrapper - contains context + card */
  .post-wrapper {
    position: relative;
    display: flex;
    flex-direction: column;
    animation: fadeUp 0.5s ease-out both;
    animation-delay: calc(var(--index) * 0.03s);
  }

  .post-wrapper.hidden {
    display: none;
  }

  /* Post Card */
  .post-card {
    display: flex;
    flex-direction: column;
    padding: 1rem;
    border-radius: 1rem;
    text-decoration: none;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .post-card:hover {
    transform: translateY(-2px);
  }

  .post-card--twitter {
    background: #000;
    color: #e7e9ea;
  }

  .post-card--twitter:hover {
    box-shadow: 0 8px 30px rgba(29, 155, 240, 0.2);
  }

  .post-card--linkedin {
    background: #fff;
    color: #000;
    border: 1px solid #e0e0e0;
  }

  .post-card--linkedin:hover {
    box-shadow: 0 8px 30px rgba(10, 102, 194, 0.15);
  }

  /* Post Card Header */
  .post-card__header {
    display: flex;
    align-items: flex-start;
    gap: 0.625rem;
    margin-bottom: 0.75rem;
  }

  .post-card__avatar {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
  }

  .post-card__avatar--placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.875rem;
    color: white;
  }

  .post-card__avatar--twitter {
    background: #333;
  }

  .post-card__avatar--linkedin {
    background: #0a66c2;
  }

  .post-card__author {
    flex: 1;
    min-width: 0;
  }

  .post-card__name {
    display: block;
    font-weight: 600;
    font-size: 0.8125rem;
    line-height: 1.3;
  }

  .post-card--twitter .post-card__name {
    color: #fff;
  }

  .post-card__role {
    display: block;
    font-size: 0.6875rem;
    line-height: 1.3;
  }

  .post-card--twitter .post-card__role {
    color: rgb(113 118 123);
  }

  .post-card--linkedin .post-card__role {
    color: #666;
  }

  .post-card__date {
    display: block;
    font-size: 0.6875rem;
    margin-top: 0.125rem;
  }

  .post-card--twitter .post-card__date {
    color: rgb(113 118 123);
  }

  .post-card--linkedin .post-card__date {
    color: #666;
  }

  .post-card__platform {
    width: 1.5rem;
    height: 1.5rem;
    flex-shrink: 0;
  }

  .post-card__platform--twitter {
    color: #fff;
  }

  .post-card__platform--linkedin {
    color: #0a66c2;
  }

  /* Post Content */
  .post-card__content {
    font-size: 0.8125rem;
    line-height: 1.5;
    white-space: pre-line;
    display: -webkit-box;
    -webkit-line-clamp: 6;
    -webkit-box-orient: vertical;
    overflow: hidden;
    flex: 1;
  }

  .post-card__content.expanded {
    -webkit-line-clamp: unset;
    display: block;
  }

  /* Post Footer */
  .post-card__footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    margin-top: 0.75rem;
    padding-top: 0.75rem;
  }

  .post-card--twitter .post-card__footer {
    border-top: 1px solid rgb(47 51 54);
  }

  .post-card--linkedin .post-card__footer {
    border-top: 1px solid #e0e0e0;
  }

  .post-card__expand {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    background: none;
    border: none;
    padding: 0.25rem 0.5rem;
    margin-left: -0.5rem;
    border-radius: 0.25rem;
    font-size: 0.6875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
  }

  .post-card--twitter .post-card__expand {
    color: rgb(231 233 234);
  }

  .post-card--twitter .post-card__expand:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #1d9bf0;
  }

  .post-card--linkedin .post-card__expand {
    color: #666;
  }

  .post-card--linkedin .post-card__expand:hover {
    background: rgba(0, 0, 0, 0.05);
    color: #0a66c2;
  }

  .post-card__expand svg {
    width: 0.75rem;
    height: 0.75rem;
    transition: transform 0.2s;
  }

  .post-card__expand.expanded svg {
    transform: rotate(180deg);
  }

  .post-card__cta {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.6875rem;
    font-weight: 500;
    margin-left: auto;
    transition: all 0.2s;
  }

  .post-card--twitter .post-card__cta {
    color: #1d9bf0;
  }

  .post-card--linkedin .post-card__cta {
    color: #0a66c2;
  }

  .post-card__cta svg {
    width: 0.75rem;
    height: 0.75rem;
    transition: transform 0.2s;
  }

  .post-card:hover .post-card__cta svg {
    transform: translate(2px, -2px);
  }

  /* Empty State */
  .empty-state {
    text-align: center;
    padding: 4rem 2rem;
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .recommendation,
    .post-wrapper,
    .tab-panel {
      animation: none;
    }
  }
</style>

<script>
  function initTabs() {
    const tabs = document.querySelectorAll('.category-tab[data-tab]');
    const tabPanels = document.querySelectorAll('.tab-panel');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const targetTab = tab.getAttribute('data-tab');

        // Update tab states
        tabs.forEach(t => {
          t.classList.remove('active');
          t.setAttribute('aria-selected', 'false');
        });
        tab.classList.add('active');
        tab.setAttribute('aria-selected', 'true');

        // Update panel visibility
        tabPanels.forEach(panel => {
          if (panel.id === `${targetTab}-panel`) {
            panel.classList.add('active');
          } else {
            panel.classList.remove('active');
          }
        });
      });
    });
  }

  function initFilters() {
    const platformBtns = document.querySelectorAll('.platform-btn[data-filter]');
    const postWrappers = document.querySelectorAll('.post-wrapper');
    const emptyState = document.querySelector('.empty-state') as HTMLElement;

    platformBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const filter = btn.getAttribute('data-filter');

        // Update active state
        platformBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        // Filter posts
        let visibleCount = 0;
        postWrappers.forEach(wrapper => {
          const type = wrapper.getAttribute('data-type');
          const shouldShow = filter === 'all' || type === filter;

          if (shouldShow) {
            wrapper.classList.remove('hidden');
            visibleCount++;
          } else {
            wrapper.classList.add('hidden');
          }
        });

        // Show empty state if needed
        if (emptyState) {
          emptyState.style.display = visibleCount === 0 ? 'block' : 'none';
        }
      });
    });
  }

  function initExpandButtons() {
    const expandButtons = document.querySelectorAll('[data-expand-btn]');
    expandButtons.forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();

        const card = btn.closest('.post-card');
        if (!card) return;

        const content = card.querySelector('.post-card__content') as HTMLElement;
        if (!content) return;

        const wasExpanded = content.classList.contains('expanded');

        // Collapse all other expanded posts first
        document.querySelectorAll('.post-card__content.expanded').forEach(otherContent => {
          if (otherContent !== content) {
            const otherCard = otherContent.closest('.post-card');
            const otherBtn = otherCard?.querySelector('[data-expand-btn]');
            const otherTextSpan = otherBtn?.querySelector('.expand-text') as HTMLElement;

            otherContent.classList.remove('expanded');
            otherBtn?.classList.remove('expanded');
            if (otherTextSpan) {
              otherTextSpan.textContent = 'Show more';
            }
          }
        });

        // Toggle current post
        const isExpanded = !wasExpanded;
        content.classList.toggle('expanded', isExpanded);
        btn.classList.toggle('expanded', isExpanded);

        const textSpan = btn.querySelector('.expand-text') as HTMLElement;
        if (textSpan) {
          textSpan.textContent = isExpanded ? 'Show less' : 'Show more';
        }
      });
    });
  }

  function initTestimonialFilters() {
    const testimonialBtns = document.querySelectorAll('.testimonial-btn[data-testimonial-filter]');
    const testimonialWrappers = document.querySelectorAll('.testimonial-wrapper');

    testimonialBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const filter = btn.getAttribute('data-testimonial-filter');

        // Update active state
        testimonialBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        // Filter testimonials
        testimonialWrappers.forEach(wrapper => {
          const type = wrapper.getAttribute('data-testimonial-type');
          const shouldShow = filter === 'all' || type === filter;

          if (shouldShow) {
            wrapper.classList.remove('hidden');
          } else {
            wrapper.classList.add('hidden');
          }
        });
      });
    });
  }

  function init() {
    initTabs();
    initFilters();
    initExpandButtons();
    initTestimonialFilters();
  }

  document.addEventListener('DOMContentLoaded', init);
  document.addEventListener('astro:after-swap', init);
</script>
